{"ast":null,"code":"var _jsxFileName = \"/home/actserv/Documents/brooks_insurance_agency_software/brooks-insurance-front-end/src/components/staff/clientRecords.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Grid, Button, Container, Header, Icon, Form, Label, Menu, Tab, Pagination, Image } from 'semantic-ui-react';\nimport { useLazyQuery } from '@apollo/react-hooks';\nimport { FETCH_CLIENTS_QUERY } from '../auth/queries';\nimport { ClientContext } from '../../context/clients';\nimport '../root.scss';\nexport default function ClientRecords(props) {\n  const context = useContext(ClientContext);\n  const [fetched, setFetched] = useState(false);\n  const [pagination, setPagination] = useState({\n    limit: 10,\n    page: 1,\n    search: \"\"\n  }); // const [clientTotals, setClientTotals] = useState();\n\n  const [clients, setClients] = useState([]);\n  let count = 1;\n  const [fetchClients, {\n    loading,\n    data\n  }] = useLazyQuery(FETCH_CLIENTS_QUERY, {\n    variables: pagination\n  });\n  useEffect(() => {\n    if (data) {\n      setClients(data.individualClients);\n      setFetched(true);\n    }\n\n    if (!fetched) {\n      fetchClients();\n\n      if (data) {\n        context.getClients(data.individualClients);\n      }\n    }\n  }, [data, context, fetched, fetchClients]);\n\n  const handleOnPageChange = (e, data) => {\n    e.preventDefault();\n    setPagination({ ...pagination,\n      page: data.activePage\n    });\n  };\n\n  const handleOnSearch = e => {\n    e.preventDefault();\n    setPagination({ ...pagination,\n      search: e.target.value\n    });\n  };\n\n  function clientList() {\n    return /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      columns: 5,\n      className: loading ? \"loading\" : '',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, \"Name\")), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, \"Email\")), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, \"Phone Number\")), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, \"Residence\")), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, \"Gender\"))), clients.items ? clients.items.map(client => /*#__PURE__*/React.createElement(Grid.Row, {\n      key: client.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    }, count++, \". \"), /*#__PURE__*/React.createElement(Image, {\n      src: \"https://react.semantic-ui.com/images/wireframe/square-image.png\",\n      avatar: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        textTransform: 'titlecase'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 15\n      }\n    }, client.firstName, \" \", client.lastName)), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, client.email), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, client.phoneNumber), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, client.town), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      floated: \"left\",\n      width: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, client.gender), /*#__PURE__*/React.createElement(Grid.Column, {\n      width: 1,\n      floated: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/staff/dashboard/clients/profile/${client.id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      icon: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"external alternate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 23\n      }\n    })))))))) : 'No Clients Available');\n  }\n\n  const panes = [{\n    menuItem: /*#__PURE__*/React.createElement(Menu.Item, {\n      key: \"clients\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, \"Individual Clients\", /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 29\n      }\n    }, clients.count)),\n    render: () => {\n      return /*#__PURE__*/React.createElement(Tab.Pane, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }\n      }, clientList(), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 13\n        }\n      }), clients.pages && /*#__PURE__*/React.createElement(Pagination, {\n        defaultActivePage: clients.page,\n        firstItem: null,\n        lastItem: null,\n        pointing: true,\n        secondary: true,\n        onPageChange: handleOnPageChange,\n        totalPages: clients.pages,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 31\n        }\n      }));\n    }\n  }];\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    columns: 2,\n    padded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    as: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"settings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Header.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/staff/dashboard/overview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 17\n    }\n  }, \"Overview\"), \" \", '>', \" Client Records\", /*#__PURE__*/React.createElement(Header.Subheader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, \"Hey there \", 'User', \", here is your client-records dashboard\"))))), /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 3,\n    className: \"clear-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    href: \"/staff/dashboard/add-new-client\",\n    color: \"blue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  }, \"+ Register New Client\"))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    columns: 1,\n    padded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Input, {\n    placeholder: \"Name, Email, Id Number ...\",\n    name: \"name\",\n    onChange: handleOnSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Button, {\n    icon: true,\n    size: 'medium',\n    onClick: e => {\n      e.preventDefault();\n      fetchClients();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }), \"Find Client\"))))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    columns: 1,\n    padded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tab, {\n    panes: panes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["/home/actserv/Documents/brooks_insurance_agency_software/brooks-insurance-front-end/src/components/staff/clientRecords.js"],"names":["React","useState","useEffect","useContext","Link","Grid","Button","Container","Header","Icon","Form","Label","Menu","Tab","Pagination","Image","useLazyQuery","FETCH_CLIENTS_QUERY","ClientContext","ClientRecords","props","context","fetched","setFetched","pagination","setPagination","limit","page","search","clients","setClients","count","fetchClients","loading","data","variables","individualClients","getClients","handleOnPageChange","e","preventDefault","activePage","handleOnSearch","target","value","clientList","items","map","client","id","textTransform","firstName","lastName","email","phoneNumber","town","gender","panes","menuItem","render","pages"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  Grid,\n  Button,\n  Container,\n  Header,\n  Icon,\n  Form,\n  Label,\n  Menu,\n  Tab,\n  Pagination,\n  Image\n} from 'semantic-ui-react';\nimport { useLazyQuery } from '@apollo/react-hooks';\nimport { FETCH_CLIENTS_QUERY } from '../auth/queries'\nimport { ClientContext } from '../../context/clients';\nimport '../root.scss';\n\nexport default function ClientRecords(props) {\n  const context = useContext(ClientContext);\n  const [fetched, setFetched] = useState(false);\n  const [pagination, setPagination] = useState({\n    limit: 10,\n    page: 1,\n    search: \"\"\n  });\n\n  // const [clientTotals, setClientTotals] = useState();\n  const [clients, setClients] = useState([]);\n  let count = 1;\n\n  const [fetchClients, { loading, data }] = useLazyQuery(FETCH_CLIENTS_QUERY, { variables: pagination });\n  useEffect(() => {\n    if (data) {\n      setClients(data.individualClients);\n      setFetched(true);\n    }\n    if (!fetched) {\n      fetchClients()\n      if (data) {\n        context.getClients(data.individualClients)\n      }\n    }\n  }, [data, context, fetched, fetchClients]);\n\n  const handleOnPageChange = (e, data) => {\n    e.preventDefault()\n    setPagination({ ...pagination, page: data.activePage })\n  }\n  const handleOnSearch = (e) => {\n    e.preventDefault()\n    setPagination({ ...pagination, search: e.target.value })\n\n  }\n\n\n  function clientList() {\n\n    return (\n      <Grid container columns={5} className={loading ? \"loading\" : ''}>\n        <Grid.Row>\n          <Grid.Column>\n            <Header as=\"h4\">Name</Header>\n          </Grid.Column>\n          <Grid.Column>\n            <Header as=\"h4\">Email</Header>\n          </Grid.Column>\n          <Grid.Column>\n            <Header as=\"h4\">Phone Number</Header>\n          </Grid.Column>\n          <Grid.Column>\n            <Header as=\"h4\">Residence</Header>\n          </Grid.Column>\n          <Grid.Column>\n            <Header as=\"h4\">Gender</Header>\n          </Grid.Column>\n        </Grid.Row>\n\n        { clients.items ? clients.items.map(client =>\n          <Grid.Row key={client.id}>\n            <Grid.Column>\n              <span>{count++}. </span>\n              <Image src='https://react.semantic-ui.com/images/wireframe/square-image.png' avatar />\n              <span style={{ textTransform: 'titlecase' }}>{client.firstName} {client.lastName}</span>\n            </Grid.Column>\n            <Grid.Column>\n              {client.email}\n            </Grid.Column>\n            <Grid.Column>\n              {client.phoneNumber}\n            </Grid.Column>\n            <Grid.Column>\n              {client.town}\n            </Grid.Column>\n            <Grid.Column>\n              <Grid>\n\n                <Grid.Column floated='left' width={3}>\n                  {client.gender}\n                </Grid.Column>\n                <Grid.Column width={1} floated='left'>\n                  <Link to={`/staff/dashboard/clients/profile/${client.id}`}>\n                    <Button icon >\n                      <Icon name='external alternate' />\n                    </Button>\n                  </Link>\n                </Grid.Column>\n              </Grid>\n            </Grid.Column>\n          </Grid.Row>\n        ) : 'No Clients Available'}\n\n      </Grid>\n    )\n  }\n\n  const panes = [\n    {\n      menuItem: (\n        <Menu.Item key='clients'>\n          Individual Clients<Label>{clients.count}</Label>\n        </Menu.Item>\n      ),\n      render: () => {\n        return (\n          <Tab.Pane>\n            {clientList()}\n            <br />\n            {clients.pages && <Pagination\n              defaultActivePage={clients.page}\n              firstItem={null}\n              lastItem={null}\n              pointing\n              secondary\n              onPageChange={handleOnPageChange}\n              totalPages={clients.pages}\n            />}\n          </Tab.Pane>\n        )\n      },\n    },\n\n  ]\n\n  return (\n    <Container>\n      <Grid container columns={2} padded>\n        <Grid.Column>\n          <div className=\"content-wrapper\">\n            <Header as='h2'>\n              <Icon name='settings' />\n              <Header.Content>\n                <a href=\"/staff/dashboard/overview\">Overview</a> {'>'} Client Records\n                <Header.Subheader>\n                  Hey there {'User'}, here is your client-records dashboard\n                </Header.Subheader>\n              </Header.Content>\n            </Header>\n          </div>\n        </Grid.Column>\n\n        <Grid.Column width={3} className=\"clear-left\">\n          <Button href=\"/staff/dashboard/add-new-client\" color='blue'>+ Register New Client</Button>\n        </Grid.Column>\n      </Grid>\n\n      <Grid container columns={1} padded>\n        <Grid.Column>\n          <Form>\n            <Form.Group>\n              <Form.Input\n                placeholder='Name, Email, Id Number ...'\n                name='name'\n                onChange={handleOnSearch}\n              />\n              <Form.Button icon size={'medium'} onClick={(e) => { e.preventDefault(); fetchClients() }}>\n                <Icon name=\"search\" />\n            Find Client\n          </Form.Button>\n            </Form.Group>\n          </Form>\n        </Grid.Column>\n      </Grid>\n\n      <Grid container columns={1} padded>\n        <Grid.Column>\n          <Tab panes={panes} />\n\n        </Grid.Column>\n      </Grid>\n\n    </Container>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}