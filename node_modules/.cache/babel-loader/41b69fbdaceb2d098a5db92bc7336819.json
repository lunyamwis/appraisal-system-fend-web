{"ast":null,"code":"var _jsxFileName = \"/home/actserv/Documents/brooks_insurance_agency_software/brooks-insurance-front-end/src/components/auth/register.js\";\nimport React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Grid, Container, Header, Tab, Form, Message } from 'semantic-ui-react';\nimport gql from 'graphql-tag';\nimport { useMutation } from '@apollo/react-hooks';\nimport '../root.scss';\n\nfunction Register(props) {\n  const [errors, setErrors] = useState({});\n  const [values, setValues] = useState({\n    adminUsername: \"\",\n    adminPassword: \"\",\n    adminEmail: \"\",\n    adminFirstName: \"\",\n    adminLastName: \"\",\n    adminPhoneNumber: \"\",\n    username: \"\",\n    password: \"\",\n    email: \"\",\n    firstName: \"\",\n    lastName: \"\",\n    phoneNumber: \"\"\n  });\n  const [addUser, {\n    loading\n  }] = useMutation(REGISTER_USER, {\n    update(_, result) {\n      console.log(result);\n      props.history.push(\"/\");\n    },\n\n    onError(err) {\n      // console.log(\"on error\", err.networkError.result.errors.toString());\n      try {\n        // setErrors(err.networkError.result.errors[0]);\n        if (err.networkError !== null && err.networkError !== 'undefined') {\n          setErrors(err.networkError.result.errors[0]);\n        } else if (err.graphQLErrors !== null && err.networkError !== 'undefined') {\n          setErrors(err.graphQLErrors.result.errors[0]);\n        }\n      } catch (e) {\n        setErrors(err);\n      }\n    },\n\n    variables: values\n  });\n\n  const onChange = event => {\n    setValues({ ...values,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const [visible, setVisible] = useState(false);\n\n  const handleDismiss = () => {\n    setVisible(false);\n  };\n\n  const onSubmit = event => {\n    event.preventDefault();\n    errors.message = \"\";\n    setVisible(true);\n    addUser();\n  };\n\n  const panes = [{\n    menuItem: 'Admin Registration',\n    render: () => /*#__PURE__*/React.createElement(Form, {\n      className: \"clear-top\",\n      noValidate: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      as: \"h4\",\n      className: \"float-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    }, \"Personal Information\"), /*#__PURE__*/React.createElement(Form.Group, {\n      widths: \"equal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Name\",\n      placeholder: \"Username\",\n      name: \"adminUsername\",\n      value: values.adminUsername,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"First name\",\n      placeholder: \"First name\",\n      name: \"adminFirstName\",\n      value: values.adminFirstName,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Last name\",\n      placeholder: \"Last name\",\n      name: \"adminLastName\",\n      value: values.adminLastName,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      widths: \"equal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Password\",\n      placeholder: \"Password\",\n      name: \"adminPassword\",\n      value: values.adminPassword,\n      onChange: onChange,\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Email\",\n      placeholder: \"Email Address\",\n      name: \"adminEmail\",\n      value: values.adminEmail,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Phone Number\",\n      placeholder: \"Phone number\",\n      name: \"adminPhoneNumber\",\n      value: values.adminPhoneNumber,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      as: \"h4\",\n      className: \"float-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }, \"Agency Information\"), /*#__PURE__*/React.createElement(Form.Group, {\n      widths: \"equal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Agency Name\",\n      placeholder: \"Name of Agency\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Office Location\",\n      placeholder: \"Agency Location\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Box Number\",\n      placeholder: \"Box Number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      widths: \"equal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Postal Code\",\n      placeholder: \"Postal Code\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Agency Email\",\n      placeholder: \"Agency Email Address\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Agency Phone Number\",\n      placeholder: \"Agency Phone number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Checkbox, {\n      label: \"I agree to the Terms and Conditions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Form.Button, {\n      secondary: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 9\n      }\n    }, \"Register Admin\"))\n  }, {\n    menuItem: 'Staff Registration',\n    render: () => /*#__PURE__*/React.createElement(Form, {\n      onSubmit: onSubmit,\n      noValidate: true,\n      className: loading ? \"loading\" : '',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      as: \"h4\",\n      className: \"float-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, \"Personal Information\"), /*#__PURE__*/React.createElement(Form.Group, {\n      widths: \"equal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Username\",\n      placeholder: \"Username\",\n      name: \"username\",\n      value: values.username,\n      onChange: onChange,\n      id: \"username\",\n      errors: errors.username ? true : undefined,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"First name\",\n      placeholder: \"First name\",\n      name: \"firstName\",\n      value: values.firstName,\n      onChange: onChange,\n      errors: errors.firstName ? true : undefined,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Last name\",\n      placeholder: \"Last name\",\n      name: \"lastName\",\n      value: values.lastName,\n      onChange: onChange,\n      errors: errors.lastName ? true : undefined,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      widths: \"equal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Password\",\n      placeholder: \"Password\",\n      name: \"password\",\n      value: values.password,\n      onChange: onChange,\n      errors: errors.password ? true : undefined,\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Email\",\n      placeholder: \"Email Address\",\n      name: \"email\",\n      value: values.email,\n      onChange: onChange,\n      errors: errors.email ? true : undefined,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Phone Number\",\n      placeholder: \"Phone number\",\n      name: \"phoneNumber\",\n      value: values.phoneNumber,\n      onChange: onChange,\n      errors: errors.phoneNumber ? true : undefined,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Checkbox, {\n      label: \"I agree to the Terms and Conditions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(Form.Button, {\n      secondary: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 29\n      }\n    }, \"Register Staff\"))\n  }];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \".app-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    padded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    as: \"h1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 25\n    }\n  }, \"Sign Up\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 25\n    }\n  }, \"Already got an account?\", /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 29\n    }\n  }, \" Sign In Here\")), /*#__PURE__*/React.createElement(Tab, {\n    className: \"clear-top\",\n    menu: {\n      secondary: true,\n      pointing: true\n    },\n    panes: panes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 25\n    }\n  }), console.log(JSON.stringify(errors, null, 2)), console.log(\"msg\", errors.message), visible ? /*#__PURE__*/React.createElement(Message, {\n    onDismiss: handleDismiss,\n    header: \"System Response\",\n    content: errors ? errors.message : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 33\n    }\n  }) : '')))));\n} // const REGISTER_USER = gql`\n//     mutation register(\n//         $username: String!\n//         $email: String!\n//         $password: String!\n//         $firstName: String!\n//         $lastName: String!\n//         $phoneNumber: String!\n//         $image: String\n//     ) {\n//         register(\n//             registerInput: {\n//                 username: $username\n//                 email: $email\n//                 password: $password\n//                 firstName: $firstName\n//                 lastName: $lastName\n//                 phoneNumber: $phoneNumber\n//                 image: $image\n//             }\n//         ){\n//             status\n//             message\n//             admin {\n//               id\n//               username\n//               email\n//               firstName\n//               isSuperuser\n//               isActive\n//               isStaff\n//               image\n//               phoneNumber\n//               roles\n//               agency {\n//                 id\n//                 name\n//                 officeLocation\n//                 imageUrl\n//                 agencyEmail\n//                 postalCode\n//                 boxNumber\n//                 isActive\n//               }\n//             }\n//         }\n//     }\n// `;\n\n\nconst REGISTER_USER = gql`\nmutation createUser {\n    createUser(input:{\n      username: \"Humphrys M\"\n      password:\"String@123\"\n      email:\"humphreymusonye@gmail.com\"\n      firstName:\"Humphrey\"\n      lastName:\"Musonye\"\n      phoneNumber:\"+254727737445\"\n     image:\"https://res.cloudinary.com/dsw3onksq/image/upload/v1592728825/user_x89zcm.png\" \n    }){\n      status\n      user {\n        id\n        username\n        email\n        firstName\n        isSuperuser\n        isActive\n        isStaff\n        image\n        phoneNumber\n        roles\n        agency{\n          id\n          name\n          agencyEmail\n        }\n        \n      }\n    }\n  }\n`;\nexport default Register;","map":{"version":3,"sources":["/home/actserv/Documents/brooks_insurance_agency_software/brooks-insurance-front-end/src/components/auth/register.js"],"names":["React","useState","Link","Grid","Container","Header","Tab","Form","Message","gql","useMutation","Register","props","errors","setErrors","values","setValues","adminUsername","adminPassword","adminEmail","adminFirstName","adminLastName","adminPhoneNumber","username","password","email","firstName","lastName","phoneNumber","addUser","loading","REGISTER_USER","update","_","result","console","log","history","push","onError","err","networkError","graphQLErrors","e","variables","onChange","event","target","name","value","visible","setVisible","handleDismiss","onSubmit","preventDefault","message","panes","menuItem","render","undefined","secondary","pointing","JSON","stringify"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { \n    Grid, \n    Container, \n    Header, \n    Tab, \n    Form,\n    Message,\n} from 'semantic-ui-react';\nimport gql from 'graphql-tag';\nimport { useMutation }from '@apollo/react-hooks';\n\nimport '../root.scss';\n\nfunction Register(props) {\n    const [errors, setErrors] = useState({});\n\n        const [values, setValues] = useState({\n            adminUsername: \"\",\n            adminPassword:\"\",\n            adminEmail:\"\",\n            adminFirstName:\"\",\n            adminLastName:\"\",\n            adminPhoneNumber:\"\",            \n            username: \"\",\n            password:\"\",\n            email:\"\",\n            firstName:\"\",\n            lastName:\"\",\n            phoneNumber:\"\",\n\n\n         })\n\n        const [addUser, { loading }] = useMutation(REGISTER_USER, {\n            update(_, result){\n                console.log(result);\n                props.history.push(\"/\");\n            },\n            onError(err){\n                // console.log(\"on error\", err.networkError.result.errors.toString());\n                try {\n                \n                    // setErrors(err.networkError.result.errors[0]);\n                if (err.networkError !== null && err.networkError !== 'undefined') {\n                    \n                    setErrors(err.networkError.result.errors[0]);\n\n                } else if (err.graphQLErrors !== null && err.networkError !== 'undefined') {\n                                    \n                    setErrors(err.graphQLErrors.result.errors[0]);\n\n                }\n                } catch (e) {\n                    setErrors(err);\n                }\n                \n            },\n            variables: values\n        });\n\n        const onChange = (event) => {\n            setValues({...values, [event.target.name]: event.target.value});\n        }\n\n        const [visible, setVisible] = useState(false);\n\n        const handleDismiss = () => {\n            setVisible(false)\n        }\n\n        const onSubmit = (event) => {\n            event.preventDefault();\n            errors.message= \"\";\n            setVisible(true);\n            addUser();\n        }\n\n        const panes = [\n            {\n              menuItem: 'Admin Registration',\n            render: () =>\n            <Form className='clear-top' noValidate>\n            <p as='h4' className=\"float-left\">Personal Information</p>\n            <Form.Group widths='equal'>\n                <Form.Input \n                    fluid label='Name' \n                    placeholder='Username' \n                    name='adminUsername' \n                    value={values.adminUsername}\n                    onChange={onChange}\n                    />\n\n                <Form.Input \n                    fluid label='First name' \n                    placeholder='First name' \n                    name='adminFirstName' \n                    value={values.adminFirstName}\n                    onChange={onChange}\n                    />\n\n                <Form.Input \n                    fluid label='Last name' \n                    placeholder='Last name' \n                    name='adminLastName' \n                    value={values.adminLastName}\n                    onChange={onChange}                    \n                    />\n            </Form.Group> \n            \n            <Form.Group widths='equal'>\n                <Form.Input \n                    fluid label='Password' \n                    placeholder='Password' \n                    name='adminPassword' \n                    value={values.adminPassword}\n                    onChange={onChange}\n                    type='password'                       \n                    />\n\n                <Form.Input \n                    fluid label='Email' \n                    placeholder='Email Address' \n                    name='adminEmail' \n                    value={values.adminEmail}\n                    onChange={onChange}                       \n                    />\n\n                <Form.Input \n                    fluid label='Phone Number' \n                    placeholder='Phone number' \n                    name='adminPhoneNumber' \n                    value={values.adminPhoneNumber}\n                    onChange={onChange}                       \n                    />\n            </Form.Group> \n\n            <p as='h4' className=\"float-left\">Agency Information</p>\n            <Form.Group widths='equal'>\n                <Form.Input fluid label='Agency Name' placeholder='Name of Agency' />\n                <Form.Input fluid label='Office Location' placeholder='Agency Location' />\n                <Form.Input fluid label='Box Number' placeholder='Box Number' />\n            </Form.Group> \n            <Form.Group widths='equal'>\n                <Form.Input fluid label='Postal Code' placeholder='Postal Code' />\n                <Form.Input fluid label='Agency Email' placeholder='Agency Email Address' />\n                <Form.Input fluid label='Agency Phone Number' placeholder='Agency Phone number' />\n            </Form.Group> \n        \n        <Form.Checkbox label='I agree to the Terms and Conditions' />\n        <Form.Button secondary>Register Admin</Form.Button>\n        </Form>,\n            },\n            {\n              menuItem: 'Staff Registration',\n              render: () => \n\n              <Form onSubmit={onSubmit} noValidate className={loading ? \"loading\":''}>\n\n            \n                <p as='h4' className=\"float-left\">Personal Information</p>\n                <Form.Group widths='equal'>\n\n                                <Form.Input \n                    fluid label='Username' \n                    placeholder='Username' \n                    name='username' \n                    value={values.username}\n                    onChange={onChange}\n                    id=\"username\"\n                    errors={errors.username ? true : undefined}\n                    />\n\n                <Form.Input \n                    fluid label='First name' \n                    placeholder='First name' \n                    name='firstName' \n                    value={values.firstName}\n                    onChange={onChange}\n                    errors={errors.firstName ? true : undefined}\n\n                    />\n\n                <Form.Input \n                    fluid label='Last name' \n                    placeholder='Last name' \n                    name='lastName' \n                    value={values.lastName}\n                    onChange={onChange}   \n                    errors={errors.lastName ? true : undefined}\n                 \n                    />\n            </Form.Group> \n            \n            <Form.Group widths='equal'>\n                <Form.Input \n                    fluid label='Password' \n                    placeholder='Password' \n                    name='password' \n                    value={values.password}\n                    onChange={onChange}     \n                    errors={errors.password ? true : undefined}\n                    type='password'\n                  \n                    />\n\n                <Form.Input \n                    fluid label='Email' \n                    placeholder='Email Address' \n                    name='email' \n                    value={values.email}\n                    onChange={onChange}     \n                    errors={errors.email ? true : undefined}\n                  \n                    />\n\n                <Form.Input \n                    fluid label='Phone Number' \n                    placeholder='Phone number' \n                    name='phoneNumber' \n                    value={values.phoneNumber}\n                    onChange={onChange}         \n                    errors={errors.phoneNumber ? true : undefined}\n              \n                    />                                \n\n                                </Form.Group> \n                            \n                            <Form.Checkbox label='I agree to the Terms and Conditions' />\n                            <Form.Button secondary>Register Staff</Form.Button>\n                            </Form>\n            },\n          ];\n\n\n          \n        return (\n            <div className='.app-container'>\n            <Container>\n                <Grid padded>\n                    <Grid.Row>\n                        <Grid.Column>\n                        <Header as='h1'>Sign Up</Header>\n                        <div className='center'>\n                            Already got an account?\n                            <Link to=\"/\"> Sign In Here</Link> \n                        </div>\n\n                        <Tab className='clear-top' menu={{ secondary: true, pointing: true }} panes={panes} />\n                        {console.log(JSON.stringify(errors, null, 2))}\n                        {console.log(\"msg\",errors.message)}\n\n                            { visible ? \n                                <Message\n                                onDismiss={handleDismiss}\n                                header='System Response'\n                                content={ errors ? errors.message : '' }\n                                />\n                                :\n                                ''\n                                \n                            }     \n                        </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n            </Container>\n            </div>\n        );\n    }\n\n\n// const REGISTER_USER = gql`\n//     mutation register(\n//         $username: String!\n//         $email: String!\n//         $password: String!\n//         $firstName: String!\n//         $lastName: String!\n//         $phoneNumber: String!\n//         $image: String\n//     ) {\n//         register(\n//             registerInput: {\n//                 username: $username\n//                 email: $email\n//                 password: $password\n//                 firstName: $firstName\n//                 lastName: $lastName\n//                 phoneNumber: $phoneNumber\n//                 image: $image\n//             }\n//         ){\n//             status\n//             message\n//             admin {\n//               id\n//               username\n//               email\n//               firstName\n//               isSuperuser\n//               isActive\n//               isStaff\n//               image\n//               phoneNumber\n//               roles\n//               agency {\n//                 id\n//                 name\n//                 officeLocation\n//                 imageUrl\n//                 agencyEmail\n//                 postalCode\n//                 boxNumber\n//                 isActive\n//               }\n//             }\n//         }\n\n//     }\n\n// `;\n\nconst REGISTER_USER =  gql`\nmutation createUser {\n    createUser(input:{\n      username: \"Humphrys M\"\n      password:\"String@123\"\n      email:\"humphreymusonye@gmail.com\"\n      firstName:\"Humphrey\"\n      lastName:\"Musonye\"\n      phoneNumber:\"+254727737445\"\n     image:\"https://res.cloudinary.com/dsw3onksq/image/upload/v1592728825/user_x89zcm.png\" \n    }){\n      status\n      user {\n        id\n        username\n        email\n        firstName\n        isSuperuser\n        isActive\n        isStaff\n        image\n        phoneNumber\n        roles\n        agency{\n          id\n          name\n          agencyEmail\n        }\n        \n      }\n    }\n  }\n`\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}