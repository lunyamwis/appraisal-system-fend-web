{"ast":null,"code":"var _jsxFileName = \"/home/actserv/Documents/brooks_insurance_agency_software/brooks-insurance-front-end/src/components/admin/registerAdmin.js\";\nimport React, { useContext, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Grid, Container, Header, Tab, Form, Message } from 'semantic-ui-react';\nimport gql from 'graphql-tag';\nimport { useMutation } from '@apollo/react-hooks';\nimport { AuthContext } from '../../context/auth';\nimport '../root.scss';\n\nfunction RegisterAdmin(props) {\n  const [errors, setErrors] = useState({});\n  const context = useContext(AuthContext);\n  const [values, setValues] = useState({\n    username: \"\",\n    password: \"\",\n    email: \"\",\n    firstName: \"\",\n    lastName: \"\",\n    phoneNumber: \"\",\n    name: \"\",\n    officeLocation: \"\",\n    boxNumber: \"\",\n    agencyEmail: \"\",\n    agencyPhoneNumber: \"\",\n    postalCode: \"\"\n  });\n  const [addUser, {\n    loading\n  }] = useMutation(REGISTER_USER, {\n    update(_, result) {\n      context.registerAdmin(result.data);\n      console.log(\"response\", result.data.createAdmin.message);\n      props.history.push({\n        pathname: '/',\n        state: {\n          systemAlert: result.data.createAdmin.message\n        }\n      });\n    },\n\n    onError(err) {\n      try {\n        if (err.networkError !== null && err.networkError !== 'undefined') {\n          setErrors(err.networkError.result.errors[0]);\n        } else if (err.graphQLErrors !== null && err.networkError !== 'undefined') {\n          setErrors(err.graphQLErrors.result.errors[0]);\n        }\n      } catch (e) {\n        setErrors(err);\n      }\n    },\n\n    variables: values\n  });\n\n  const onChange = event => {\n    setValues({ ...values,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const [visible, setVisible] = useState(false);\n\n  const handleDismiss = () => {\n    setVisible(false);\n  };\n\n  const onSubmit = event => {\n    event.preventDefault();\n    errors.message = \"\";\n    setVisible(true);\n    addUser();\n  };\n\n  const panes = [{\n    menuItem: 'Admin Registration',\n    render: () => /*#__PURE__*/React.createElement(Form, {\n      onSubmit: onSubmit,\n      noValidate: true,\n      className: loading ? \"loading\" : '',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      as: \"h4\",\n      className: \"float-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 13\n      }\n    }, \"Personal Information\"), /*#__PURE__*/React.createElement(Form.Group, {\n      widths: \"equal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Username\",\n      placeholder: \"Username\",\n      name: \"username\",\n      value: values.username,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"First name\",\n      placeholder: \"First name\",\n      name: \"firstName\",\n      value: values.firstName,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Last name\",\n      placeholder: \"Last name\",\n      name: \"lastName\",\n      value: values.lastName,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      widths: \"equal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Password\",\n      placeholder: \"Password\",\n      name: \"password\",\n      value: values.password,\n      onChange: onChange,\n      type: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Email\",\n      placeholder: \"Email Address\",\n      name: \"email\",\n      value: values.email,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Phone Number\",\n      placeholder: \"Phone number\",\n      name: \"phoneNumber\",\n      value: values.phoneNumber,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"p\", {\n      as: \"h4\",\n      className: \"float-left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }\n    }, \"Agency Information\"), /*#__PURE__*/React.createElement(Form.Group, {\n      widths: \"equal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Agency Name\",\n      placeholder: \"Name of Agency\",\n      name: \"name\",\n      value: values.name,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Office Location\",\n      placeholder: \"Agency Location\",\n      name: \"officeLocation\",\n      value: values.officeLocation,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Box Number\",\n      placeholder: \"Box Number\",\n      name: \"boxNumber\",\n      value: values.boxNumber,\n      onChange: onChange,\n      type: \"number\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Group, {\n      widths: \"equal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Postal Code\",\n      placeholder: \"Postal Code\",\n      name: \"postalCode\",\n      value: values.postalCode,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Agency Email\",\n      placeholder: \"Agency Email Address\",\n      name: \"agencyEmail\",\n      value: values.agencyEmail,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Form.Input, {\n      fluid: true,\n      label: \"Agency Phone Number\",\n      placeholder: \"Agency Phone number\",\n      name: \"agencyPhoneNumber\",\n      value: values.agencyPhoneNumber,\n      onChange: onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(Form.Checkbox, {\n      label: \"I agree to the Terms and Conditions\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(Form.Button, {\n      secondary: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 9\n      }\n    }, \"Register Admin\"))\n  }];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \".app-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    padded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    as: \"h1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }, \"Sign Up\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 25\n    }\n  }, \"Already got an account?\", /*#__PURE__*/React.createElement(Link, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }, \" Sign In Here\")), /*#__PURE__*/React.createElement(Tab, {\n    className: \"clear-top\",\n    menu: {\n      secondary: true,\n      pointing: true\n    },\n    panes: panes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 25\n    }\n  }), visible ? /*#__PURE__*/React.createElement(Message, {\n    onDismiss: handleDismiss,\n    header: \"System Response\",\n    content: errors ? errors.message : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 29\n    }\n  }) : '')))));\n}\n\nconst REGISTER_USER = gql`\nmutation createAdmin(\n    $username: String!\n    $firstName: String!\n    $lastName: String!\n    $password: String!\n    $email: String!\n    $phoneNumber: String!\n    $name: String!\n    $officeLocation: String!\n    $boxNumber: Int\n    $postalCode: Int!\n    $agencyPhoneNumber:  String!\n    $agencyEmail: String!\n\n) {\n  createAdmin(\n  admin:{\n    username: $username\n    password: $password\n    email: $email\n    firstName: $firstName\n    lastName: $lastName\n    phoneNumber: $phoneNumber\n   image:\"https://res.cloudinary.com/dsw3onksq/image/upload/v1592728825/user_x89zcm.png\" \n  }\n  agency:{\n    name: $name\n    officeLocation: $officeLocation\n    boxNumber: $boxNumber\n    postalCode: $postalCode\n    phoneNumber: $agencyPhoneNumber\n    agencyEmail: $agencyEmail\n    imageUrl:\"https://res.cloudinary.com/dsw3onksq/image/upload/v1592728825/user_x89zcm.png\"\n  }){\n    status\n    message\n    admin {\n      id\n      username\n      email\n      firstName\n      isSuperuser\n      isActive\n      isStaff\n      image\n      phoneNumber\n      roles\n      agency {\n        id\n        name\n        officeLocation\n        imageUrl\n        agencyEmail\n        postalCode\n        boxNumber\n        isActive\n      }\n    }\n  }\n}\n`;\nexport default RegisterAdmin;","map":{"version":3,"sources":["/home/actserv/Documents/brooks_insurance_agency_software/brooks-insurance-front-end/src/components/admin/registerAdmin.js"],"names":["React","useContext","useState","Link","Grid","Container","Header","Tab","Form","Message","gql","useMutation","AuthContext","RegisterAdmin","props","errors","setErrors","context","values","setValues","username","password","email","firstName","lastName","phoneNumber","name","officeLocation","boxNumber","agencyEmail","agencyPhoneNumber","postalCode","addUser","loading","REGISTER_USER","update","_","result","registerAdmin","data","console","log","createAdmin","message","history","push","pathname","state","systemAlert","onError","err","networkError","graphQLErrors","e","variables","onChange","event","target","value","visible","setVisible","handleDismiss","onSubmit","preventDefault","panes","menuItem","render","secondary","pointing"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { \n    Grid, \n    Container, \n    Header, \n    Tab, \n    Form,\n    Message,\n} from 'semantic-ui-react';\nimport gql from 'graphql-tag';\nimport { useMutation }from '@apollo/react-hooks';\nimport { AuthContext } from '../../context/auth';\n\nimport '../root.scss';\n\nfunction RegisterAdmin(props) {\n    const [errors, setErrors] = useState({});\n    const context = useContext(AuthContext);\n\n        const [values, setValues] = useState({           \n            username: \"\",\n            password:\"\",\n            email:\"\",\n            firstName:\"\",\n            lastName:\"\",\n            phoneNumber:\"\",\n            name: \"\",\n            officeLocation: \"\",\n            boxNumber: \"\",\n            agencyEmail: \"\",\n            agencyPhoneNumber: \"\",\n            postalCode: \"\",\n         })\n\n        const [addUser, { loading }] = useMutation(REGISTER_USER, {\n            update(_, result){\n                context.registerAdmin(result.data);\n                console.log(\"response\", result.data.createAdmin.message);\n                props.history.push({\n                    pathname: '/',\n                    state: { systemAlert: result.data.createAdmin.message }\n                  })\n            },\n            onError(err){\n                try {\n                \n                if (err.networkError !== null && err.networkError !== 'undefined') {\n                    \n                    setErrors(err.networkError.result.errors[0]);\n\n                } else if (err.graphQLErrors !== null && err.networkError !== 'undefined') {\n                                    \n                    setErrors(err.graphQLErrors.result.errors[0]);\n\n                }\n                } catch (e) {\n                    setErrors(err);\n                }\n                \n            },\n            variables: values\n        });\n\n        const onChange = (event) => {\n            setValues({...values, [event.target.name]: event.target.value});\n        }\n\n        const [visible, setVisible] = useState(false);\n\n        const handleDismiss = () => {\n            setVisible(false)\n        }\n\n        const onSubmit = (event) => {\n            event.preventDefault();\n            errors.message= \"\";\n            setVisible(true);\n            addUser();\n        }\n\n\n        const panes = [\n            {\n              menuItem: 'Admin Registration',\n            render: () =>\n\n            <Form onSubmit={onSubmit} noValidate className={loading ? \"loading\":''}>\n            <p as='h4' className=\"float-left\">Personal Information</p>\n            <Form.Group widths='equal'>\n                <Form.Input \n                    fluid label='Username' \n                    placeholder='Username' \n                    name='username' \n                    value={values.username}\n                    onChange={onChange}\n                    />\n\n                <Form.Input \n                    fluid label='First name' \n                    placeholder='First name' \n                    name='firstName' \n                    value={values.firstName}\n                    onChange={onChange}\n                    />\n\n                <Form.Input \n                    fluid label='Last name' \n                    placeholder='Last name' \n                    name='lastName' \n                    value={values.lastName}\n                    onChange={onChange}                    \n                    />\n            </Form.Group> \n            \n            <Form.Group widths='equal'>\n                <Form.Input \n                    fluid label='Password' \n                    placeholder='Password' \n                    name='password' \n                    value={values.password}\n                    onChange={onChange}\n                    type='password'                       \n                    />\n\n                <Form.Input \n                    fluid label='Email' \n                    placeholder='Email Address' \n                    name='email' \n                    value={values.email}\n                    onChange={onChange}                       \n                    />\n\n                <Form.Input \n                    fluid label='Phone Number' \n                    placeholder='Phone number' \n                    name='phoneNumber' \n                    value={values.phoneNumber}\n                    onChange={onChange}                       \n                    />\n            </Form.Group> \n\n            <p as='h4' className=\"float-left\">Agency Information</p>\n            <Form.Group widths='equal'>\n                <Form.Input fluid label='Agency Name' placeholder='Name of Agency' name=\"name\" value={values.name} onChange={onChange}/>\n                <Form.Input fluid label='Office Location' placeholder='Agency Location' name=\"officeLocation\" value={values.officeLocation} onChange={onChange}/>\n                <Form.Input fluid label='Box Number' placeholder='Box Number' name=\"boxNumber\" value={values.boxNumber} onChange={onChange} type=\"number\"/>\n            </Form.Group> \n            <Form.Group widths='equal'>\n                <Form.Input fluid label='Postal Code' placeholder='Postal Code' name=\"postalCode\" value={values.postalCode} onChange={onChange}/>\n                <Form.Input fluid label='Agency Email' placeholder='Agency Email Address' name=\"agencyEmail\" value={values.agencyEmail} onChange={onChange}/>\n                <Form.Input fluid label='Agency Phone Number' placeholder='Agency Phone number' name=\"agencyPhoneNumber\" value={values.agencyPhoneNumber} onChange={onChange}/>\n            </Form.Group> \n        \n        <Form.Checkbox label='I agree to the Terms and Conditions' />\n        <Form.Button secondary>Register Admin</Form.Button>\n        </Form>,\n            },\n          ];\n\n        return (\n            <div className='.app-container'>\n            <Container>\n                <Grid padded>\n                    <Grid.Row>\n                        <Grid.Column>\n                        <Header as='h1'>Sign Up</Header>\n                        <div className='center'>\n                            Already got an account?\n                            <Link to=\"/\"> Sign In Here</Link> \n                        </div>\n\n                        <Tab className='clear-top' menu={{ secondary: true, pointing: true }} panes={panes} />\n\n                        { visible ? \n                            <Message\n                            onDismiss={handleDismiss}\n                            header='System Response'\n                            content={ errors ? errors.message : '' }\n                            />\n                            :\n                            ''\n                                \n                        }   \n       \n                        </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n            </Container>\n            </div>\n        );\n    }\n\nconst REGISTER_USER =  gql`\nmutation createAdmin(\n    $username: String!\n    $firstName: String!\n    $lastName: String!\n    $password: String!\n    $email: String!\n    $phoneNumber: String!\n    $name: String!\n    $officeLocation: String!\n    $boxNumber: Int\n    $postalCode: Int!\n    $agencyPhoneNumber:  String!\n    $agencyEmail: String!\n\n) {\n  createAdmin(\n  admin:{\n    username: $username\n    password: $password\n    email: $email\n    firstName: $firstName\n    lastName: $lastName\n    phoneNumber: $phoneNumber\n   image:\"https://res.cloudinary.com/dsw3onksq/image/upload/v1592728825/user_x89zcm.png\" \n  }\n  agency:{\n    name: $name\n    officeLocation: $officeLocation\n    boxNumber: $boxNumber\n    postalCode: $postalCode\n    phoneNumber: $agencyPhoneNumber\n    agencyEmail: $agencyEmail\n    imageUrl:\"https://res.cloudinary.com/dsw3onksq/image/upload/v1592728825/user_x89zcm.png\"\n  }){\n    status\n    message\n    admin {\n      id\n      username\n      email\n      firstName\n      isSuperuser\n      isActive\n      isStaff\n      image\n      phoneNumber\n      roles\n      agency {\n        id\n        name\n        officeLocation\n        imageUrl\n        agencyEmail\n        postalCode\n        boxNumber\n        isActive\n      }\n    }\n  }\n}\n`\nexport default RegisterAdmin;\n"]},"metadata":{},"sourceType":"module"}