{"ast":null,"code":"var _jsxFileName = \"/home/actserv/Documents/Lunyamwi_Projects/appraisal-system/appraisal-system-fend-web/src/components/auth/login.js\";\nimport React, { useContext, useState } from 'react';\nimport { Button, Form } from 'semantic-ui-react';\nimport { Grid, Container, Header, Message } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\nimport { useMutation } from '@apollo/react-hooks';\nimport { AuthContext } from '../../context/auth';\nimport { LOGIN_USER } from './queries';\nimport '../root.scss';\n\nfunction Login(props) {\n  const [errors, setErrors] = useState({});\n  const context = useContext(AuthContext);\n  const [visible, setVisible] = useState(false);\n  let alert;\n\n  if (props.location.state) {\n    alert = props.location.state.systemAlert;\n  }\n\n  const [values, setValues] = useState({\n    username: \"\",\n    password: \"\"\n  });\n\n  const handleDismiss = () => {\n    setVisible(false);\n  };\n\n  const [loginUser, {\n    loading\n  }] = useMutation(LOGIN_USER, {\n    update(_, result) {\n      context.login(result.data);\n      window.location.href = '/admin/dashboard';\n    },\n\n    onError(err) {\n      try {\n        if (err.graphQLErrors) {\n          setErrors({\n            message: err.graphQLErrors[0].message\n          });\n        }\n\n        if (err.networkError !== null && err.networkError !== 'undefined') {\n          setErrors({\n            message: err.networkError.result.errors[0]\n          });\n        } else if (err.graphQLErrors !== null && err.networkError !== 'undefined') {\n          setErrors({\n            message: err.graphQLErrors.result.errors[0]\n          });\n        }\n      } catch (e) {}\n    },\n\n    variables: values\n  });\n\n  const onChange = event => {\n    setValues({ ...values,\n      [event.target.name]: event.target.value\n    });\n  };\n\n  const onSubmit = event => {\n    event.preventDefault(); // console.log(\"form values\",values)\n\n    setErrors({});\n    loginUser();\n    setVisible(true);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \".app-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    padded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    as: \"h1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 29\n    }\n  }, \"Sign In\"), alert && visible ? /*#__PURE__*/React.createElement(Message, {\n    onDismiss: handleDismiss,\n    header: \"System Response\",\n    content: alert,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 33\n    }\n  }) : '', /*#__PURE__*/React.createElement(\"div\", {\n    className: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 29\n    }\n  }, \"New to Performance Manager?\", /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/register\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }, \" Sign Up Here\")), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: onSubmit,\n    noValidate: true,\n    className: loading ? \"loading\" : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Form.Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 37\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Username\",\n    name: \"username\",\n    value: values.username,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Form.Field, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 37\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Password\",\n    type: \"password\",\n    name: \"password\",\n    value: values.password,\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 33\n    }\n  }, \"Forgot password?\", /*#__PURE__*/React.createElement(Link, {\n    to: \"/password-reset-request\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 37\n    }\n  }, \" Reset Password\")), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    secondary: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 33\n    }\n  }, \"Sign In\")), visible && Object.keys(errors).length ? /*#__PURE__*/React.createElement(Message, {\n    onDismiss: handleDismiss,\n    header: \"Failed!\",\n    warning: true,\n    content: errors ? errors.message : '',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 33\n    }\n  }) : '')))));\n}\n\nexport default Login;","map":{"version":3,"sources":["/home/actserv/Documents/Lunyamwi_Projects/appraisal-system/appraisal-system-fend-web/src/components/auth/login.js"],"names":["React","useContext","useState","Button","Form","Grid","Container","Header","Message","Link","useMutation","AuthContext","LOGIN_USER","Login","props","errors","setErrors","context","visible","setVisible","alert","location","state","systemAlert","values","setValues","username","password","handleDismiss","loginUser","loading","update","_","result","login","data","window","href","onError","err","graphQLErrors","message","networkError","e","variables","onChange","event","target","name","value","onSubmit","preventDefault","Object","keys","length"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react';\nimport { Button, Form } from 'semantic-ui-react';\nimport { Grid, Container, Header, Message } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\n\nimport { useMutation } from '@apollo/react-hooks';\nimport { AuthContext } from '../../context/auth';\nimport { LOGIN_USER } from './queries'\nimport '../root.scss';\n\nfunction Login(props) {\n    const [errors, setErrors] = useState({});\n    const context = useContext(AuthContext);\n    const [visible, setVisible] = useState(false);\n\n    let alert;\n\n    if (props.location.state) {\n        alert = props.location.state.systemAlert;\n    }\n\n    const [values, setValues] = useState({\n        username: \"\",\n        password: \"\",\n    });\n\n\n    const handleDismiss = () => {\n        setVisible(false)\n    }\n\n    const [loginUser, { loading }] = useMutation(LOGIN_USER, {\n        update(_, result) {\n            context.login(result.data);\n            window.location.href = '/admin/dashboard'\n        },\n        onError(err) {\n            try {\n                if (err.graphQLErrors) {\n                    setErrors({ message: err.graphQLErrors[0].message });\n                }\n\n                if (err.networkError !== null && err.networkError !== 'undefined') {\n\n                    setErrors({ message: err.networkError.result.errors[0] });\n\n                } else if (err.graphQLErrors !== null && err.networkError !== 'undefined') {\n                    setErrors({ message: err.graphQLErrors.result.errors[0] });\n\n                }\n            } catch (e) { }\n\n        },\n        variables: values\n    });\n\n    const onChange = (event) => {\n        setValues({ ...values, [event.target.name]: event.target.value });\n    }\n\n    const onSubmit = (event) => {\n        event.preventDefault();\n        // console.log(\"form values\",values)\n        setErrors({})\n        loginUser();\n        setVisible(true);\n    }\n\n    return (\n        <div className='.app-container'>\n            <Container>\n                <Grid padded>\n                    <Grid.Row>\n                        <Grid.Column>\n                            <Header as='h1'>Sign In</Header>\n                            {alert && visible ?\n                                <Message\n                                    onDismiss={handleDismiss}\n                                    header='System Response'\n                                    content={alert}\n                                />\n                                :\n                                ''\n                            }\n\n\n                            <div className='center'>\n                                New to Performance Manager?\n                            <Link to=\"/admin/register\"> Sign Up Here</Link>\n                            </div>\n                            <Form onSubmit={onSubmit} noValidate className={loading ? \"loading\" : ''}>\n\n                                <Form.Field>\n                                    <label>Username</label>\n                                    <input\n                                        placeholder='Username'\n                                        name='username'\n                                        value={values.username}\n                                        onChange={onChange}\n\n                                    />\n                                </Form.Field>\n\n                                <Form.Field>\n                                    <label>Password</label>\n                                    <input\n                                        placeholder='Password'\n                                        type='password'\n                                        name='password'\n                                        value={values.password}\n                                        onChange={onChange}\n                                    />\n                                </Form.Field>\n                                <div className='center'>\n                                    Forgot password?\n                                    <Link to=\"/password-reset-request\"> Reset Password</Link>\n                                </div>\n                                <Button type='submit' secondary>Sign In</Button>\n                            </Form>\n\n                            {visible && Object.keys(errors).length ?\n                                <Message\n                                    onDismiss={handleDismiss}\n                                    header='Failed!'\n                                    warning\n                                    content={errors ? errors.message : ''}\n                                />\n                                :\n                                ''\n\n                            }\n                        </Grid.Column>\n                    </Grid.Row>\n                </Grid>\n            </Container>\n        </div>\n    );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}