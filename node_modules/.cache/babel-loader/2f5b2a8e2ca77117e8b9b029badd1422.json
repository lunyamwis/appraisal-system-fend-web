{"ast":null,"code":"var _jsxFileName = \"/home/actserv/Documents/brooks_insurance_agency_software/brooks-insurance-front-end/src/components/receipts/listReceipts.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Grid, Button, Container, Header, Icon, Form, Label, Menu, Tab, Pagination } from 'semantic-ui-react';\nimport moment from 'moment';\nimport { useQuery } from '@apollo/react-hooks';\nimport { GET_RECEIPTS, GET_RECEIPT } from './queries';\nimport { ReceiptContext } from '../../context/receipt';\nimport '../root.scss';\nimport { AuthContext } from '../../context/auth';\nexport default function ReceiptRecords(props) {\n  const authContext = useContext(AuthContext);\n  const context = useContext(ReceiptContext);\n  const [fetched, setFetched] = useState(false);\n  const [pagination, setPagination] = useState({\n    limit: 10,\n    page: 1,\n    search: \"\"\n  });\n  const [receipts, seReceipts] = useState([]);\n  const {\n    data: receiptData\n  } = useQuery(GET_RECEIPTS, {\n    variables: pagination\n  });\n  useEffect(() => {\n    if (receiptData) {\n      setReceipts(receiptData.motorReceipts);\n      setFetched(true);\n    }\n\n    if (!setFetched) {\n      if (receiptData) {\n        context.getReceipts(receiptData.motorReceipts);\n      }\n    }\n\n    if (!fetched) {\n      if (data) {\n        context.getReceipts(data.motorReceipts);\n      }\n    }\n  }, [data, context, fetched, corporateData, corporateFetched]);\n\n  const handleOnPageChange = (e, data) => {\n    e.preventDefault();\n    setPagination({ ...pagination,\n      page: data.activePage\n    });\n  };\n\n  const handleOnSearch = e => {\n    e.preventDefault();\n    setPagination({ ...pagination,\n      search: e.target.value\n    });\n  };\n\n  function receiptList() {\n    return /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      columns: 6,\n      className: loading ? \"loading\" : '',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, \"ReceiptNumber\")), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, \"Date\")), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, \"Transaction Date\")), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }, \"Amount Words\")), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, \"Amount Figures\")), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Header, {\n      as: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 13\n      }\n    }, \"Issued By\"))), receipts.items ? receipts.items.map((receipt, key) => /*#__PURE__*/React.createElement(Grid.Row, {\n      key: receipt.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 15\n      }\n    }, key + 1, \". \"), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        textTransform: 'titlecase'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }, receipt.receiptNumber)), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontSize: \".9em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 15\n      }\n    }, receipt.date)), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, receipt.transactionDate), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }\n    }, receipt.amountWords), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, receipt.amountFigures), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }\n    }, receipt.issuedBy), /*#__PURE__*/React.createElement(Grid.Column, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Grid.Column, {\n      floated: \"left\",\n      width: 3,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }\n    }, moment(receipt.createdAt).format('DD/MM/YYYY')), /*#__PURE__*/React.createElement(Grid.Column, {\n      width: 1,\n      floated: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: `/staff/dashboard/receipt/profile/${receipt.id}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      icon: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Icon, {\n      name: \"external alternate\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 23\n      }\n    })))))))) : 'No Receipts Available');\n  }\n\n  const panes = [{\n    menuItem: /*#__PURE__*/React.createElement(Menu.Item, {\n      key: \"receipts\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }\n    }, \"Receipts\", /*#__PURE__*/React.createElement(Label, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    }, receipts.count)),\n    render: () => {\n      return /*#__PURE__*/React.createElement(Tab.Pane, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }\n      }, receiptList(), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }\n      }), receipts.pages && /*#__PURE__*/React.createElement(Pagination, {\n        defaultActivePage: receipts.page,\n        firstItem: null,\n        lastItem: null,\n        pointing: true,\n        secondary: true,\n        onPageChange: handleOnPageChange,\n        totalPages: receipts.pages,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 32\n        }\n      }));\n    }\n  }];\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    columns: 2,\n    padded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    as: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"settings\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Header.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/staff/dashboard/overview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 15\n    }\n  }, \"Overview\"), \" \", '>', \" \", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"/staff/dashboard/receipt\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 70\n    }\n  }, \"Policy Records\"), \" \", '>', /*#__PURE__*/React.createElement(Header.Subheader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 17\n    }\n  }, \"Hey there \", authContext.user.username, \", here is your receipt-records dashboard\"))))), /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 3,\n    className: \"clear-left\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    href: \"/staff/dashboard/receipt/add-new-receipt\",\n    color: \"blue\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  }, \"+ Generate A Receipt\"))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    columns: 1,\n    padded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form.Input, {\n    placeholder: \"Name, Email, Id Number ...\",\n    name: \"name\",\n    onChange: handleOnSearch,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Form.Button, {\n    icon: true,\n    size: 'medium',\n    onClick: e => {\n      e.preventDefault();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Icon, {\n    name: \"search\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 17\n    }\n  }), \"Find Receipts\"))))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    columns: 1,\n    padded: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Tab, {\n    panes: panes,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"sources":["/home/actserv/Documents/brooks_insurance_agency_software/brooks-insurance-front-end/src/components/receipts/listReceipts.js"],"names":["React","useState","useEffect","useContext","Link","Grid","Button","Container","Header","Icon","Form","Label","Menu","Tab","Pagination","moment","useQuery","GET_RECEIPTS","GET_RECEIPT","ReceiptContext","AuthContext","ReceiptRecords","props","authContext","context","fetched","setFetched","pagination","setPagination","limit","page","search","receipts","seReceipts","data","receiptData","variables","setReceipts","motorReceipts","getReceipts","corporateData","corporateFetched","handleOnPageChange","e","preventDefault","activePage","handleOnSearch","target","value","receiptList","loading","items","map","receipt","key","id","textTransform","receiptNumber","fontSize","date","transactionDate","amountWords","amountFigures","issuedBy","createdAt","format","panes","menuItem","count","render","pages","user","username"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Link } from 'react-router-dom';\nimport {\n  Grid,\n  Button,\n  Container,\n  Header,\n  Icon,\n  Form,\n  Label,\n  Menu,\n  Tab,\n  Pagination\n} from 'semantic-ui-react';\nimport moment from 'moment';\nimport { useQuery } from '@apollo/react-hooks';\nimport { GET_RECEIPTS, GET_RECEIPT } from './queries';\nimport { ReceiptContext } from '../../context/receipt';\nimport '../root.scss';\nimport { AuthContext } from '../../context/auth';\n\nexport default function ReceiptRecords(props) {\n  const authContext = useContext(AuthContext);\n  const context = useContext(ReceiptContext);\n  const [fetched, setFetched] = useState(false);\n  const [pagination, setPagination] = useState({\n    limit: 10,\n    page: 1,\n    search: \"\"\n  });\n\n\n  const [receipts, seReceipts] = useState([]);\n  \n  const { data: receiptData } = useQuery(GET_RECEIPTS, { variables: pagination });\n  useEffect(() => {\n    if (receiptData) {\n      setReceipts(receiptData.motorReceipts);\n      setFetched(true);\n    }\n    if (!setFetched) {\n      if (receiptData) {\n        context.getReceipts(receiptData.motorReceipts)\n      }\n    }\n    \n    if (!fetched) {\n      if (data) {\n        context.getReceipts(data.motorReceipts)\n      }\n    }\n  }, [data, context, fetched, corporateData, corporateFetched]);\n\n  const handleOnPageChange = (e, data) => {\n    e.preventDefault()\n    setPagination({ ...pagination, page: data.activePage })\n  }\n  const handleOnSearch = (e) => {\n    e.preventDefault()\n    setPagination({ ...pagination, search: e.target.value })\n\n  }\n\n\n  function receiptList() {\n\n    return (\n      <Grid container columns={6} className={loading ? \"loading\" : ''}>\n        <Grid.Row>\n          <Grid.Column>\n            <Header as=\"h4\">ReceiptNumber</Header>\n          </Grid.Column>\n          <Grid.Column>\n            <Header as=\"h4\">Date</Header>\n          </Grid.Column>\n          <Grid.Column>\n            <Header as=\"h4\">Transaction Date</Header>\n          </Grid.Column>\n          <Grid.Column>\n            <Header as=\"h4\">Amount Words</Header>\n          </Grid.Column>\n          <Grid.Column>\n            <Header as=\"h4\">Amount Figures</Header>\n          </Grid.Column>\n          <Grid.Column>\n            <Header as=\"h4\">Issued By</Header>\n          </Grid.Column>\n        </Grid.Row>\n\n        { receipts.items ? receipts.items.map((receipt, key) =>\n          <Grid.Row key={receipt.id}>\n            <Grid.Column>\n              <span>{key + 1}. </span>\n              <span style={{ textTransform: 'titlecase' }}>{receipt.receiptNumber}</span>\n            </Grid.Column>\n            <Grid.Column>\n              <span style={{ fontSize: \".9em\" }}>{receipt.date}</span>\n            </Grid.Column>\n            <Grid.Column>\n              {receipt.transactionDate}\n            </Grid.Column>\n            <Grid.Column>\n              {receipt.amountWords}\n            </Grid.Column>\n            <Grid.Column>\n              {receipt.amountFigures}\n            </Grid.Column>\n            <Grid.Column>\n              {receipt.issuedBy}\n            </Grid.Column>\n            <Grid.Column>\n              <Grid>\n                <Grid.Column floated='left' width={3}>\n                  {moment(receipt.createdAt).format('DD/MM/YYYY')}\n                </Grid.Column>\n                <Grid.Column width={1} floated='left'>\n                  <Link to={`/staff/dashboard/receipt/profile/${receipt.id}`}>\n                    <Button icon >\n                      <Icon name='external alternate' />\n                    </Button>\n                  </Link>\n                </Grid.Column>\n              </Grid>\n            </Grid.Column>\n          </Grid.Row>\n        ) : 'No Receipts Available'}\n\n      </Grid>\n    )\n  }\n  \n\n  const panes = [\n    {\n      menuItem: (\n        <Menu.Item key='receipts'>\n          Receipts<Label>{receipts.count}</Label>\n        </Menu.Item>\n      ),\n      render: () => {\n        return (\n          <Tab.Pane>\n            {receiptList()}\n            <br />\n            {receipts.pages && <Pagination\n              defaultActivePage={receipts.page}\n              firstItem={null}\n              lastItem={null}\n              pointing\n              secondary\n              onPageChange={handleOnPageChange}\n              totalPages={receipts.pages}\n            />}\n          </Tab.Pane>\n        )\n      },\n    },\n    \n\n  ]\n\n  return (\n    <Container>\n      <Grid container columns={2} padded>\n        <Grid.Column>\n          <div className=\"content-wrapper\">\n            <Header as='h2'>\n              <Icon name='settings' />\n              <Header.Content>\n              <a href=\"/staff/dashboard/overview\">Overview</a> {'>'} <a href=\"/staff/dashboard/receipt\">Policy Records</a> {'>'}  \n                <Header.Subheader>\n                  Hey there {authContext.user.username}, here is your receipt-records dashboard\n                </Header.Subheader>\n              </Header.Content>\n            </Header>\n          </div>\n        </Grid.Column>\n\n        <Grid.Column width={3} className=\"clear-left\">\n          <Button href=\"/staff/dashboard/receipt/add-new-receipt\" color='blue'>+ Generate A Receipt</Button>\n        </Grid.Column>\n      </Grid>\n\n      <Grid container columns={1} padded>\n        <Grid.Column>\n          <Form>\n            <Form.Group>\n              <Form.Input\n                placeholder='Name, Email, Id Number ...'\n                name='name'\n                onChange={handleOnSearch}\n              />\n              <Form.Button icon size={'medium'} onClick={(e) => { e.preventDefault() }}>\n                <Icon name=\"search\" />\n            Find Receipts\n          </Form.Button>\n            </Form.Group>\n          </Form>\n        </Grid.Column>\n      </Grid>\n\n      <Grid container columns={1} padded>\n        <Grid.Column>\n          <Tab panes={panes} />\n\n        </Grid.Column>\n      </Grid>\n\n    </Container>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}